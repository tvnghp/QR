<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <title>Agribank Chi nh√°nh C·∫ßn Th∆° II ‚Ä¢ C√¥ng c·ª• QR ƒë·ªãa ch·ªâ</title>
  <link rel="icon" href="agribank-logo.png" type="image/png">
  <link rel="apple-touch-icon" href="agribank-logo.png">
  <style>
  :root{
    --primary:#8B0000; --primary-600:#660000; --primary-400:#A52A2A; --primary-200:#CD5C5C;
    --accent:#DAA520; --accent-light:#F0E68C;
    --bg:#ffffff; --text:#1f1f1f; --muted:#666; --border:#e8e8e8; --thead-bg:#FFF5F5;
    --success:#228B22; --warning:#FF8C00; --danger:#DC143C;
  }
  *{box-sizing:border-box}
  html{height:100%; -webkit-text-size-adjust:100%; text-size-adjust:100%;}
  body{height:100%;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;margin:0;background:linear-gradient(135deg, #fff, #FFF5F5);color:var(--text);min-height:100vh}
  body.no-scroll{overflow:hidden}
  
  /* Scrollbar t√πy ch·ªânh */
  ::-webkit-scrollbar { width: 12px; height: 12px; }
  ::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 6px; }
  ::-webkit-scrollbar-thumb { background: var(--primary-200); border-radius: 6px; border: 2px solid #f1f1f1; }
  ::-webkit-scrollbar-thumb:hover { background: var(--primary-400); }

    /* Header */
      header.hero{display:flex;align-items:center;justify-content:center;padding:12px 20px;border-bottom:3px solid var(--primary);background:linear-gradient(135deg, #fff, #FFF5F5);box-shadow:0 2px 15px rgba(139,0,0,0.1)}
  header.hero .logo{height:64px;width:64px;object-fit:contain;filter:drop-shadow(0 2px 4px rgba(0,0,0,0.1));display:flex;align-items:center;justify-content:center}
  header.hero .title{text-align:center;display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:64px}
  header.hero h1{margin:0;font-size:22px;line-height:1.1;letter-spacing:.8px;text-transform:uppercase;color:var(--primary);text-shadow:0 1px 2px rgba(0,0,0,0.1)}
  header.hero h3{margin:4px 0 0;font-size:20px;line-height:1.1;font-weight:800;color:var(--primary);letter-spacing:1px;text-transform:uppercase;text-shadow:0 1px 2px rgba(0,0,0,0.1)}
  header.hero .ghost{width:48px;height:48px}

  main{max-width:1100px;margin:20px auto;padding:0 16px}

  .card{background:#fff;border:1px solid var(--border);border-radius:16px;padding:20px;margin-bottom:20px;box-shadow:0 4px 20px rgba(139,0,0,0.08);transition:all 0.3s ease;border-left:4px solid var(--primary)}
  .card:hover{box-shadow:0 6px 25px rgba(139,0,0,0.12);transform:translateY(-2px)}
  .card h2{color:var(--primary);margin-top:0;margin-bottom:16px;font-size:20px;font-weight:700;border-bottom:2px solid var(--accent);padding-bottom:8px}

  label{display:block;font-weight:600;margin:8px 0 6px}
  input[type="text"],input[type="password"],input[type="url"],textarea{
    width:100%;padding:14px 16px;border:2px solid var(--border);border-radius:12px;font-size:16px;min-height:48px;
    transition:all 0.3s ease;background:#fff;
    -webkit-appearance:none;appearance:none;touch-action:manipulation
  }
  input:focus,textarea:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 4px rgba(139,0,0,0.15);transform:translateY(-1px)}
  input:hover,textarea:hover{border-color:var(--primary-200)}

  .grid{display:grid;gap:12px}
  .grid.cols-3{grid-template-columns:repeat(3,1fr)}
  .grid.cols-2{grid-template-columns:repeat(2,1fr)}

  .actions{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap}
  button{
    cursor:pointer;border:0;padding:14px 18px;border-radius:12px;font-weight:700;letter-spacing:.3px;min-height:48px;
    -webkit-tap-highlight-color:transparent;transition:all 0.3s ease;font-size:15px;position:relative;overflow:hidden;
    -webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;
    touch-action:manipulation
  }
  button::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent);transition:left 0.5s}
  button:hover::before{left:100%}
  .btn-primary{background:linear-gradient(135deg, var(--primary), var(--primary-600));color:#fff;box-shadow:0 4px 15px rgba(139,0,0,0.3)}
  .btn-primary:hover{background:linear-gradient(135deg, var(--primary-600), var(--primary));box-shadow:0 6px 20px rgba(139,0,0,0.4);transform:translateY(-2px)}
  .btn-secondary{background:#fff;color:var(--primary);border:2px solid var(--primary);box-shadow:0 2px 10px rgba(139,0,0,0.1)}
  .btn-secondary:hover{background:var(--primary);color:#fff;box-shadow:0 4px 15px rgba(139,0,0,0.2);transform:translateY(-1px)}
  .btn-danger{background:linear-gradient(135deg, var(--danger), #B22222);color:#fff;box-shadow:0 4px 15px rgba(220,20,60,0.3)}
  .btn-danger:hover{background:linear-gradient(135deg, #B22222, var(--danger));box-shadow:0 6px 20px rgba(220,20,60,0.4);transform:translateY(-2px)}

  .toolbar{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-bottom:12px}
  .toolbar .spacer{flex:1}

  /* B·∫£ng + wrapper k√©o ngang tr√™n mobile */
  .table-wrap{overflow-x:auto;-webkit-overflow-scrolling:touch;border-radius:16px;border:2px solid var(--border);background:#fff;box-shadow:0 4px 20px rgba(139,0,0,0.08)}
  table{width:100%;border-collapse:separate;border-spacing:0}
  thead th{background:linear-gradient(135deg, var(--thead-bg), #FFF8F8);color:var(--primary);font-weight:700;position:sticky;top:0;z-index:1;padding:14px 12px;font-size:14px;border-bottom:2px solid var(--primary-200)}
  th,td{padding:12px 12px;border-bottom:1px solid var(--border);text-align:left;font-size:14px;vertical-align:top;white-space:nowrap}
  tbody tr:nth-child(even){background:#fefefe}
  tbody tr:hover{background:linear-gradient(90deg, #FFF5F5, #FFF8F8);transform:scale(1.01);transition:all 0.2s ease}
  /* ƒê·ªãa ch·ªâ trong LIST: xu·ªëng nhi·ªÅu d√≤ng nh∆∞ng kh√¥ng v∆∞·ª£t qu√° chi·ªÅu cao QR */
  .addr-wrap{white-space:normal;line-height:1.35;max-height:96px;overflow-y:auto;overflow-x:hidden;word-break:break-word;overflow-wrap:anywhere;width:100%}
  /* ∆Øu ti√™n ƒë·ªô r·ªông nhi·ªÅu h∆°n cho c·ªôt ƒê·ªãa ch·ªâ ƒë·ªÉ ch·ªØ kh√¥ng b·ªã b√≥ h·∫πp */
  th.addr-col, td.addr-col{width:clamp(280px,32%,520px);min-width:280px}
  /* CƒÉn gi·ªØa c·ªôt Link Maps */
  th.link-col, td.link-col{ text-align:center }

  .code{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}
  .qr{
  width:96px; height:96px;
  object-fit:contain;
  border:1px solid var(--border);
  border-radius:0;            /* ‚Üê kh√¥ng bo g√≥c thumbnail */
  background:#fff;
  image-rendering: pixelated; /* ‚Üê gi·ªØ √¥ QR s·∫Øc, d·ªÖ qu√©t */
}
@media (min-width:720px){
  .qr{ width:96px; height:96px; }
}
  .empty{color:#777;font-style:italic;padding:12px}
  a{color:var(--primary);text-decoration:none}
  .muted{color:var(--muted);font-size:12px}
  .inline-btns button{padding:8px 10px;border-radius:8px}
  .inline-btns .sep{color:#bbb}

  .tip{background:linear-gradient(135deg, #FFF8DC, #F0E68C);border:2px solid var(--accent);padding:12px 16px;border-radius:12px;color:#8B4513;box-shadow:0 2px 10px rgba(218,165,32,0.2)}
  /* Tip to√†n b·ªÅ ngang card (full khung) */
  .tip-wide{display:block;margin:12px -20px -20px;-webkit-margin-start:-20px;-webkit-margin-end:-20px;border-radius:0 0 12px 12px}
  #qrStatus{display:none;align-items:center;gap:8px;margin:8px 0}
  #qrStatus.show{display:flex}
  
  /* Hi·ªáu ·ª©ng ƒë·∫πp cho QR */
  .qr{transition:all 0.3s ease;border:2px solid var(--border)}
  .qr:hover{transform:scale(1.05);border-color:var(--primary);box-shadow:0 4px 15px rgba(139,0,0,0.2)}
  
  /* C·∫£i thi·ªán toolbar */
  .toolbar{background:linear-gradient(135deg, #fff, #FFF5F5);padding:16px;border-radius:12px;border:1px solid var(--border);margin-bottom:16px;box-shadow:0 2px 10px rgba(139,0,0,0.05)}
  /* Ti√™u ƒë·ªÅ trong toolbar chi·∫øm tr·ªçn d√≤ng ƒë·ªÉ g·∫°ch ch√¢n k√©o full khung */
  .toolbar h2{flex:1 0 100%; width:100%}
  /* S·∫Øp x·∫øp g·ªçn 3 n√∫t map ƒë·ªÉ t·∫≠n d·ª•ng ngang */
  .map-actions{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-top:6px}
  @media (max-width: 900px){ .map-actions{grid-template-columns:repeat(2,1fr)} }
  @media (max-width: 720px){ .map-actions{grid-template-columns:1fr} }
  /* Cho ph√©p m·ªôt √¥ trong l∆∞·ªõi span to√†n h√†ng ƒë·ªÉ t·∫≠n d·ª•ng kho·∫£ng tr·ªëng hai b√™n */
  .col-span-2{grid-column:1 / -1}
  
  /* C·∫£i thi·ªán GitHub section */
  .gh-wrap{background:linear-gradient(135deg, #f8f9fa, #e9ecef);padding:16px;border-radius:12px;border:1px solid var(--border)}
  .gh-badge{background:linear-gradient(135deg, #fff, #f8f9fa);border:2px solid var(--primary-200)}

  /* Footer */
  .site-footer{margin-top:28px;background:var(--primary-600);color:#fff;box-shadow:0 -4px 20px rgba(102,0,0,0.2)}
  .site-footer .inner{max-width:1100px;margin:0 auto;padding:20px 16px;display:flex;gap:20px;align-items:center;justify-content:space-between;flex-wrap:wrap}
  .site-footer .copy{display:flex;flex-direction:row;gap:20px;align-items:center;flex:1}
  .site-footer .footer-logo{text-align:center;flex-shrink:0;display:flex;align-items:center}
  .site-footer .footer-logo-img{height:48px;width:48px;object-fit:contain;filter:drop-shadow(0 2px 6px rgba(0,0,0,0.3))}
  .site-footer .copyright-text{display:flex;flex-direction:column;gap:8px;flex:1;justify-content:center}
  .site-footer .line1{font-weight:600;letter-spacing:.3px;font-size:15px;line-height:1.3}
  .site-footer .line2{font-weight:700;text-transform:uppercase;color:#fff;letter-spacing:.8px;font-size:13px;line-height:1.2}
  .site-footer .contact{display:flex;flex-direction:column;gap:4px;text-align:right;min-width:280px}
  .site-footer .contact-title{font-weight:700;text-transform:uppercase;color:#fff;letter-spacing:.8px;font-size:12px;margin-bottom:4px;border-bottom:1px solid rgba(255,255,255,0.3);padding-bottom:4px}
  .site-footer .contact-info{font-size:13px;line-height:1.4;color:rgba(255,255,255,0.9)}
  .site-footer .contact-info strong{color:#fff;font-weight:600}
  .site-footer a{color:#fff;text-decoration:none;border-bottom:1px dotted rgba(255,255,255,.6);transition:all 0.2s ease}
  .site-footer a:hover{color:var(--accent);border-bottom-color:var(--accent)}

  /* Modal b·∫£n ƒë·ªì */
  .modal{position:fixed;inset:0;background:rgba(0,0,0,.35);display:flex;align-items:center;justify-content:center;padding:16px;z-index:9999}
  .modal.hidden{display:none}
  .modal .content{width:min(900px,96vw);height:min(74vh,720px);background:#fff;border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,.2);display:flex;flex-direction:column;padding:12px}
  #map{flex:1;border-radius:12px;border:1px solid var(--border)}

  /* Kh·ªëi GitHub */
  .gh-wrap{display:flex;gap:12px;align-items:flex-start}
  .gh-badge{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,#fff,#f7eef1);display:flex;align-items:center;justify-content:center;border:1px solid var(--border)}
  .gh-badge svg{width:30px;height:30px;fill:var(--primary)}
  .gh-body{flex:1}

  /* Mobile-first responsive design */
  @media (max-width: 1200px) {
    main { max-width: 95%; padding: 0 12px; }
    .site-footer .inner { max-width: 95%; }
  }
  
  @media (max-width: 900px) { 
    .grid.cols-3 { grid-template-columns: repeat(2, 1fr); }
    .grid.cols-2 { grid-template-columns: 1fr; }
    .actions { flex-direction: column; }
    .actions button { width: 100%; }
    .toolbar { flex-direction: column; gap: 12px; }
    .toolbar input[type="text"] { width: 100%; min-width: auto; }
    .toolbar .spacer { display: none; }
  }
  
  @media (max-width: 720px) {
    /* Header mobile optimization */
    header.hero { 
      flex-direction: column; 
      text-align: center; 
      padding: 16px 12px; 
      gap: 12px;
    }
    header.hero .ghost { display: none; }
    header.hero .title h1, header.hero .title h3 { white-space: normal; }
    header.hero .title h1 { font-size: 18px; line-height: 1.2; }
    header.hero .title h3 { font-size: 16px; line-height: 1.2; }
    header.hero .logo { height: 48px; width: 48px; }
    
    /* Main content mobile optimization */
    main { margin: 16px auto; padding: 0 12px; }
    .card { padding: 16px; margin-bottom: 16px; border-radius: 12px; }
    .card h2 { font-size: 18px; margin-bottom: 12px; }
    /* Toolbar title underline full-width & spacing */
    .toolbar h2 { width:100%; padding-bottom:6px; margin-bottom:10px; border-bottom:2px solid var(--accent); }
    
    /* Grid mobile optimization */
    .grid.cols-3 { grid-template-columns: 1fr; }
    .grid.cols-2 { grid-template-columns: 1fr; }
    
    /* Form elements mobile optimization */
    input[type="text"], input[type="password"], input[type="url"], textarea {
      padding: 12px 14px; 
      font-size: 16px; /* Prevents zoom on iOS */
      min-height: 44px; /* Better touch target */
    }
    
    /* Buttons mobile optimization */
    .actions { flex-direction: column; gap: 8px; }
    .actions button { 
      width: 100%; 
      font-size: 16px; 
      padding: 14px 16px; 
      min-height: 48px; /* Better touch target */
    }
    
    /* Toolbar mobile optimization */
    .toolbar { 
      position: sticky; 
      top: calc(env(safe-area-inset-top, 0px)); 
      background: #fff; 
      padding: 12px; 
      margin-bottom: 12px; 
      z-index: 50; 
      border-bottom: 2px solid var(--primary-200);
      flex-direction: column;
      gap: 12px;
    }
    .toolbar input[type="text"] { 
      width: 100%; 
      min-width: auto; 
      font-size: 16px;
    }
    .toolbar .spacer { display: none; }
    
    /* Table mobile optimization */
    .table-wrap { border-radius: 12px; }
    th.hide-sm, td.hide-sm { display: none; }
    th, td { 
      padding: 10px 8px; 
      font-size: 13px; 
      white-space: normal; 
    }
    
    /* QR code mobile optimization */
    .qr { width: 48px; height: 48px; }
    /* Gi·ªõi h·∫°n chi·ªÅu cao ƒë·ªãa ch·ªâ theo chi·ªÅu cao QR tr√™n mobile */
    .addr-wrap{max-height:48px}
    
    /* Modal mobile optimization */
    .modal .content { 
      width: 100vw; 
      height: 100vh; 
      border-radius: 0; 
      padding: 10px; 
    }
    /* Tip wide kh·ªõp padding card ·ªü mobile */
    .tip-wide{ margin-left:-16px; margin-right:-16px }
    
                   /* Footer mobile optimization */
      .site-footer .footer-logo { 
        margin-bottom: 8px; 
      }
      .site-footer .footer-logo-img { 
        height: 36px; 
        width: 36px; 
      }
     .site-footer .contact { 
       text-align: center; 
       min-width: auto; 
       margin: 16px 0; 
     }
    .site-footer .inner { 
      flex-direction: column; 
      text-align: center; 
      gap: 16px; 
      padding: 16px 12px;
    }
    .site-footer .contact-info { font-size: 12px; }
    
    /* GitHub section mobile optimization */
    .gh-wrap { flex-direction: column; gap: 16px; }
    .gh-badge { width: 48px; height: 48px; }
    .gh-badge svg { width: 24px; height: 24px; }
  }
  
  @media (max-width: 480px) {
    /* Extra small screens */
    header.hero { padding: 12px 8px; }
    header.hero .title h1 { font-size: 16px; }
    header.hero .title h3 { font-size: 14px; }
    
    main { padding: 0 8px; }
    .card { padding: 12px; }
    
    input[type="text"], input[type="password"], input[type="url"], textarea {
      padding: 10px 12px;
      font-size: 16px;
    }
    
    .actions button { 
      padding: 12px 14px; 
      font-size: 15px; 
    }
    .tip-wide{ margin-left:-12px; margin-right:-12px; font-size:13px; }
    
                   .site-footer .inner { padding: 16px 8px; }
      .site-footer .footer-logo-img { height: 32px; width: 32px; }
      .site-footer .contact-info { font-size: 11px; }
  }
  
  /* Touch-friendly improvements */
  @media (hover: none) and (pointer: coarse) {
    button, input, .qr, .gh-badge {
      -webkit-tap-highlight-color: rgba(139, 0, 0, 0.1);
    }
    
    .card:hover { transform: none; }
    .qr:hover { transform: none; }
    
    /* Larger touch targets for mobile */
    .gh-badge { min-width: 48px; min-height: 48px; }
    .qr { min-width: 48px; min-height: 48px; }
    
    /* Better touch scrolling */
    .table-wrap {
      -webkit-overflow-scrolling: touch;
      scroll-behavior: smooth;
    }
    
    /* Prevent text selection on buttons */
    button {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
  }
  
  /* Mobile-specific improvements */
  @media (max-width: 720px) {
    /* Better mobile spacing */
    .card + .card { margin-top: 16px; }
    
    /* Mobile-friendly table */
    .table-wrap {
      margin: 0 -12px;
      border-radius: 0;
      border-left: none;
      border-right: none;
    }
    
    /* Mobile-friendly buttons in actions */
    .actions .btn-secondary {
      background: #f8f9fa;
      border-color: var(--primary-200);
      color: var(--primary-600);
    }
    
    /* Mobile-friendly input focus */
    input:focus, textarea:focus {
      box-shadow: 0 0 0 3px rgba(139, 0, 0, 0.2);
      transform: none;
    }
    
    /* Mobile-friendly card shadows */
    .card {
      box-shadow: 0 2px 12px rgba(139, 0, 0, 0.1);
    }
    
    /* Mobile-friendly footer */
    .site-footer {
      margin-top: 20px;
    }
  }
  
  /* Mobile keyboard optimization */
  @media (max-height: 600px) and (orientation: landscape) {
    header.hero { padding: 8px 16px; }
    header.hero .title h1 { font-size: 14px; }
    header.hero .title h3 { font-size: 12px; }
    main { margin: 12px auto; }
    .card { padding: 12px; margin-bottom: 12px; }
  }
  
  /* Landscape mobile optimization */
  @media (max-width: 900px) and (orientation: landscape) {
    header.hero { flex-direction: row; padding: 12px 16px; }
    header.hero .title h1 { font-size: 16px; }
    header.hero .title h3 { font-size: 14px; }
    
    .grid.cols-3 { grid-template-columns: repeat(2, 1fr); }
    .actions { flex-direction: row; flex-wrap: wrap; }
    .actions button { flex: 1; min-width: 120px; }
  }
  
  /* Animation cho c√°c card */
  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  .card { animation: fadeInUp 0.6s ease-out; }
  
  /* Hi·ªáu ·ª©ng loading cho button */
  .btn-loading { position: relative; color: transparent !important; }
  .btn-loading::after { content: ''; position: absolute; top: 50%; left: 50%; width: 20px; height: 20px; margin: -10px 0 0 -10px; border: 2px solid transparent; border-top: 2px solid currentColor; border-radius: 50%; animation: spin 1s linear infinite; }
  
  @keyframes spin { to { transform: rotate(360deg); } }
  
  /* Nh·∫•p nh√°y c·∫£nh b√°o ƒë·ªè cho b·∫£ng (ƒë·∫≠m, r·∫•t d·ªÖ th·∫•y) */
     .flash-danger{ animation: flashDanger 1.2s ease-in-out 3; }
   .table-wrap.flash-danger{ border-color: var(--danger) !important; }
   .card.flash-danger{ animation: flashDanger 1.2s ease-in-out 3; }
   
   .flash-success{ animation: flashSuccess 1.2s ease-in-out 3; }
   .card.flash-success{ animation: flashSuccess 1.2s ease-in-out 3; }
  @keyframes flashDanger{
    0%{
      background:#fff;
      box-shadow: none;
    }
    35%{
      background:#ffd6d6; /* ƒë·ªè nh·∫°t r√µ r√†ng */
      box-shadow: inset 0 0 0 4px rgba(220,20,60,.85), 0 0 16px rgba(220,20,60,.65);
    }
    70%{
      background:#fff0f0;
      box-shadow: inset 0 0 0 3px rgba(220,20,60,.75), 0 0 10px rgba(220,20,60,.55);
    }
    100%{
      background:#fff;
      box-shadow: none;
    }
  }
  /* Overlay nh·∫•p nh√°y to√†n m√†n h√¨nh ƒë·ªÉ ƒë·∫£m b·∫£o ng∆∞·ªùi d√πng th·∫•y r√µ */
  .screen-flash{ position:fixed; inset:0; background:rgba(220,20,60,0); pointer-events:none; z-index:999999; animation: screenFlash 1.2s ease-in-out 3; }
  @keyframes screenFlash{
    0%{ background: rgba(220,20,60,0); }
    30%{ background: rgba(220,20,60,.35); }
    60%{ background: rgba(220,20,60,.15); }
    100%{ background: rgba(220,20,60,0); }
  }

  /* ===== Modal x√°c nh·∫≠n xo√° to√†n b·ªô ===== */
  #clearModal .content{ width:min(480px,96vw); height:auto; padding:16px; }
  /* Generic confirm layout for modals */
  .modal .confirm-card{ display:flex; flex-direction:column; gap:12px; }
  .modal .confirm-card .actions{ display:flex; gap:10px; justify-content:flex-end; margin-top:8px; }
  .blink-red{ animation: blinkRed 0.9s ease-in-out 2; }
  .blink-red-infinite{ animation: blinkRed 1.1s ease-in-out infinite; }
  @keyframes blinkRed{
    0%{ box-shadow:none; background:#fff; }
    50%{ box-shadow:0 0 0 3px rgba(220,20,60,.6); background:#FFECEC; }
    100%{ box-shadow:none; background:#fff; }
  }

  @keyframes flashSuccess {
    0% { background: #fff; box-shadow: none; }
    25% { background: #d4edda; box-shadow: inset 0 0 0 4px rgba(40, 167, 69, 0.85), 0 0 16px rgba(40, 167, 69, 0.65); }
    50% { background: #c3e6cb; box-shadow: inset 0 0 0 3px rgba(40, 167, 69, 0.75), 0 0 10px rgba(40, 167, 69, 0.55); }
    75% { background: #d4edda; box-shadow: inset 0 0 0 2px rgba(40, 167, 69, 0.65), 0 0 8px rgba(40, 167, 69, 0.45); }
    100% { background: #fff; box-shadow: none; }
  }
  </style>
  <!-- Leaflet CSS & vendor -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="" />
  <script defer src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/exceljs/dist/exceljs.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
  <script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
  <script defer src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
</head>
<body>
  <header class="hero">
    <img class="logo" src="agribank-logo.png" alt="Agribank" onerror="this.style.display='none'"/>
    <div class="title">
      <h1>Ng√¢n h√†ng N√¥ng nghi·ªáp v√† Ph√°t tri·ªÉn N√¥ng th√¥n</h1>
      <h3>CHI NH√ÅNH C·∫¶N TH∆† II</h3>
    </div>
    <div class="ghost" aria-hidden="true"></div>
  </header>

  <main>
        <!-- Form nh·∫≠p ƒë·ªãa ch·ªâ -->
    <!-- ...existing code... -->
  <section class="card">
    <h2>Th√™m ƒë·ªãa ch·ªâ</h2>
    <div class="grid cols-1">
      <div>
        <label for="officer">C√°n b·ªô nh·∫≠p *</label>
        <input id="officer" type="text" placeholder="VD: Nguy·ªÖn VƒÉn B" />
      </div>
      <div>
        <label for="name">T√™n ƒë·ªãa ƒëi·ªÉm *</label>
        <input id="name" type="text" placeholder="VD: H·ªô kinh doanh Nguy·ªÖn A" />
      </div>
      <div>
        <label for="address">ƒê·ªãa ch·ªâ *</label>
        <input id="address" type="text" placeholder="VD: S·ªë 08-10, Nam K·ª≥ Kh·ªüi Nghƒ©a, ph∆∞·ªùng Ninh Ki·ªÅu, TP C·∫ßn Th∆°" />
      </div>
      <!-- ·∫®n d√≤ng nh·∫≠p Link Google Maps, gi·ªØ l·∫°i c√°c n√∫t v·ªã tr√≠ -->
            <!-- ...existing code... -->
      <div>
        <label for="mapsUrl">Ho·∫∑c d√°n link Google Maps *</label>
        <input id="mapsUrl" type="text" placeholder="https://maps.app.goo.gl/..." />
      </div>
      <!-- ...existing code... -->
      <div class="map-actions">
        <button id="btnUseCurrent" type="button" class="btn-secondary">üìç V·ªã tr√≠ hi·ªán t·∫°i</button>
        <button id="btnPickOnMap" type="button" class="btn-secondary">üó∫Ô∏è Ch·ªçn tr√™n b·∫£n ƒë·ªì</button>
        <button id="btnOpenMaps" type="button" class="btn-secondary">Google Maps</button>
      </div>
      <details>
        <summary>Th√™m th√¥ng tin</summary>
        <div>
          <label for="phone">S·ªë ƒëi·ªán tho·∫°i</label>
          <input id="phone" type="text" placeholder="VD: 0987..." />
        </div>
        <div>
          <label for="branch">Chi nh√°nh</label>
          <input id="branch" type="text" placeholder="VD: CN C·∫ßn Th∆° II" />
        </div>
        <div>
          <label for="customerCode">M√£ KH</label>
          <input id="customerCode" type="text" placeholder="VD: 1890-XXXXXXXXX" />
        </div>
        <div>
          <label for="cccd">CCCD</label>
          <input id="cccd" type="text" placeholder="12 s·ªë" />
        </div>
        <div>
          <label for="note">Ghi ch√∫</label>
          <input id="note" type="text" placeholder="VD: Nh√† m·∫∑t ti·ªÅn, gi·ªù m·ªü c·ª≠a, ng∆∞·ªùi li√™n h·ªá..." />
        </div>
      </details>
      <div class="actions" style="margin-top:16px;">
        <button class="btn-primary" id="btnCreate">L∆∞u th√¥ng tin</button>
        <button class="btn-secondary" id="btnQuickPrint">In QR nhanh</button>
        <button class="btn-secondary" id="btnReset">X√≥a form</button>
      </div>
    </div>
    <span class="muted">* B·∫Øt bu·ªôc</span>
    <div id="createStatus" class="muted" style="margin-top:6px; display:none; color:#0a0; font-weight:600;"></div>
  </section>  
    <!-- ƒê∆∞a danh s√°ch QR l√™n tr√™n -->
  <section class="card">
    <h2>Danh s√°ch ƒë√£ nh·∫≠p</h2>
    <div id="list"></div>
    <!-- ƒê∆∞a toolbar xu·ªëng d∆∞·ªõi list -->
         <div class="toolbar" style="margin-top:12px;">
       <input id="q" type="text" placeholder="T√¨m theo t√™n/chi nh√°nh/m√£ KH/sƒët/c√°n b·ªô" style="min-width:220px; padding:10px 10px; border:1px solid #ddd; border-radius:10px;" />
       <button class="btn-secondary" id="btnSyncGitHub" title="ƒê·ªìng b·ªô d·ªØ li·ªáu t·ª´ GitHub">üîÑ ƒê·ªìng b·ªô GitHub</button>
       <button class="btn-secondary" id="btnSetToken" title="Thi·∫øt l·∫≠p Token GitHub">Thi·∫øt l·∫≠p Token</button>
       <button class="btn-secondary" id="btnZipSelected" title="T·∫£i ZIP c√°c QR ƒë√£ ch·ªçn">ZIP QR (ƒë√£ ch·ªçn)</button>
       <button class="btn-secondary" id="btnPrintA4" title="In nhi·ªÅu tem tr√™n 1 A4 cho c√°c d√≤ng ƒë√£ ch·ªçn">In A4 (ƒë√£ ch·ªçn)</button>
       <button class="btn-secondary" id="btnClearAll" title="X√≥a to√†n b·ªô trong tr√¨nh duy·ªát (kh√¥ng ·∫£nh h∆∞·ªüng GitHub)">X√≥a to√†n b·ªô</button>
     </div>
  </section>

    
  </main>

  <footer class="site-footer">
    <div class="inner">
      <div class="copy">
                 <div class="footer-logo">
           <a href="https://www.agribank.com.vn" target="_blank" rel="noopener">
             <img src="agribank-logo.png" alt="Agribank Logo" class="footer-logo-img">
           </a>
         </div>
        <div class="copyright-text">
          <div class="line1">B·∫£n quy·ªÅn ¬© <span id="yearNow"></span> <b>AGRIBANK</b> ‚Äî Ng√¢n h√†ng N√¥ng nghi·ªáp v√† Ph√°t tri·ªÉn N√¥ng th√¥n Vi·ªát Nam</div>
          <div class="line2">CHI NH√ÅNH C·∫¶N TH∆† II ‚Ä¢ All rights reserved.</div>
        </div>
      </div>
      <div class="contact">
        <div class="contact-title">Li√™n h·ªá</div>
        <div class="contact-info">
          <strong>Nguy·ªÖn Th√†nh Trung</strong><br>
          üì± <strong>Cellphone:</strong> 0947.86.86.82<br>
          üìß <strong>Email:</strong> trungnguyenthanh1@agribank.com.vn
        </div>
      </div>
             
    </div>
  </footer>

<script>
/* ========= Utilities ========= */
const LS_KEY='qr_maps_items_v3';
function uid(n=8){ return Math.random().toString(36).slice(2,2+n); }
function nowISO(){ return new Date().toISOString(); }
function sleep(ms){ return new Promise(r=>setTimeout(r,ms)); }
function escapeHtml(s){ s=String(s||''); return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#39;'); }
function normalizePhone(v){ return String(v||'').replace(/[^0-9+]/g,''); }
function normalizeCCCD(v){ return String(v||'').replace(/[^0-9]/g,''); }
function mapsUrlFromAddress(a){ const q=encodeURIComponent(String(a||'').trim()); return `https://www.google.com/maps/search/?api=1&query=${q}`; }
function remember(k,v){ try{ localStorage.setItem(k,v) }catch(e){} }
function recall(k){ try{ return localStorage.getItem(k)||'' }catch(e){ return '' } }
async function sha256Hex(str){ const enc=new TextEncoder().encode(str); const buf=await crypto.subtle.digest('SHA-256',enc); return Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,'0')).join(''); }
function randomHex(bytes=8){ const a=new Uint8Array(bytes); crypto.getRandomValues(a); return Array.from(a).map(b=>b.toString(16).padStart(2,'0')).join(''); }

/* ========= QR loader ========= */
function loadScriptOnce(src){ return new Promise((res,rej)=>{ const s=document.createElement('script'); s.src=src; s.async=false; s.defer=true; s.onload=()=>res(); s.onerror=()=>rej(new Error('Failed '+src)); document.head.appendChild(s); }); }
let __qrReady=null;
async function ensureQRCode(maxWaitMs=15000){
  if (typeof window.QRCode!=='undefined' && window.QRCode.toCanvas) return;
  if (!__qrReady){
    const fallbacks=['https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js','https://unpkg.com/qrcode@1.5.3/build/qrcode.min.js','https://cdnjs.cloudflare.com/ajax/libs/qrcode/1.5.1/qrcode.min.js'];
    __qrReady=(async()=>{ for(const u of fallbacks){ try{ await loadScriptOnce(u); if(typeof window.QRCode!=='undefined') return; }catch(e){} } throw new Error('Kh√¥ng t·∫£i ƒë∆∞·ª£c QRCode'); })();
  }
  const banner=document.getElementById('qrStatus'); banner?.classList.add('show');
  const start=Date.now(); while(Date.now()-start<maxWaitMs){ try{ await __qrReady; }catch(e){} if(typeof window.QRCode!=='undefined'){ banner?.classList.remove('show'); return; } await sleep(2000); }
  banner?.classList.add('show'); throw new Error('QRCode ch∆∞a s·∫µn s√†ng.');
}

/* ========= QR Logo ========= */
const QR_LOGO={ enabled:true, src:'agribank-logo.png', sizeRatio:0.22, paddingRatio:0.06, rounded:10 };
let __logoImg=null;
async function loadLogo(){ if(!QR_LOGO.enabled) return null; if(__logoImg) return __logoImg;
  return new Promise((r)=>{ const img=new Image(); img.onload=()=>{__logoImg=img;r(img)}; img.onerror=()=>r(null); img.crossOrigin='anonymous'; img.src=QR_LOGO.src; });
}
function drawRoundedRect(ctx,x,y,w,h,r){
  const rr=Math.min(r,w/2,h/2);
  ctx.beginPath();
  ctx.moveTo(x+rr,y);
  ctx.arcTo(x+w,y,x+w,y+h,rr);
  ctx.arcTo(x+w,y+h,x,y,y+h,rr);
  ctx.arcTo(x,y+h,x,y,rr);
  ctx.arcTo(x,y,x+w,y,rr);
  ctx.closePath();
}

/* ========= Schema & state ========= */
const HEADERS=['id','code','name','address','mapsUrl','createdAt','note','phone','branch','cccd','customerCode','officer','pinSalt','pinHash'];
//function loadItems(){ try{ return JSON.parse(localStorage.getItem(LS_KEY))||[] }catch(e){ return [] } }
function loadItems(){ return []; } // kh√¥ng d√πng n·ªØa
//function saveItems(arr){ localStorage.setItem(LS_KEY, JSON.stringify(arr)); }
function saveItems(){ /* no-op: kh√¥ng l∆∞u local */ }
function sheetToJsonStrict(ws){
  const arr=XLSX.utils.sheet_to_json(ws,{defval:'',raw:false});
  return arr.map(r=>({ id:r.id??'', code:r.code??'', name:r.name??'', address:r.address??'', mapsUrl:r.mapsUrl??'', createdAt:r.createdAt??'',
    note:r.note??'', phone:r.phone??'', branch:r.branch ?? r.group ?? '', cccd:r.cccd??'', customerCode:r.customerCode??'',
    officer:r.officer??'', pinSalt:r.pinSalt??'', pinHash:r.pinHash??'' }));
}
let items=[];//loadItems();
// migrate group -> branch
if(Array.isArray(items)){ let migrated=false; for(const it of items){ if(it && it.group && !it.branch){ it.branch=it.group; migrated=true; } } if(migrated) saveItems(items); }
let selectedIds=new Set();

/* ========= Auto-load t·ª´ GitHub ========= */
/*(async function autoLoadFromGitHub(){
  try{
    // ∆Øu ti√™n t·∫£i t·ª´ GitHub tr∆∞·ªõc
    const githubSuccess = await loadFromGitHub();
    if(githubSuccess){
      console.log('ƒê√£ t·∫£i d·ªØ li·ªáu t·ª´ GitHub th√†nh c√¥ng');
      saveItems(items); // L∆∞u v√†o localStorage ƒë·ªÉ backup
    } else {
      // Fallback: t·∫£i t·ª´ file local n·∫øu GitHub th·∫•t b·∫°i
      try{
        const res=await fetch('data.xlsx?t='+Date.now(),{cache:'no-store'});
        if(res.ok){
          const buf=await res.arrayBuffer(); const wb=XLSX.read(buf,{type:'array'}); const ws=wb.Sheets[wb.SheetNames[0]];
          if(ws){
            const rows=sheetToJsonStrict(ws);
            const have=new Set(items.map(x=>x.id)); let added=0;
            for(const r of rows){ if(!have.has(r.id) && (r.name && (r.address||r.mapsUrl))){ items.push(r); added++; } }
            if(added){ items.sort((a,b)=> new Date(b.createdAt)-new Date(a.createdAt)); saveItems(items); }
          }
        }
      }catch(e){ console.log('Kh√¥ng th·ªÉ t·∫£i t·ª´ file local:', e); }
    }
  }catch(e){
    console.error('L·ªói auto-load:', e);
  }
 
  renderTable();
})();*/

/* ========= CRUD ========= */
async function handleCreate(){
  const officer=document.getElementById('officer').value.trim();
  const pin='123123'; // ƒê·∫∑t m·∫∑c ƒë·ªãnh
  const name=document.getElementById('name').value.trim();
  const branch=document.getElementById('branch').value.trim();
  const address=document.getElementById('address').value.trim();
  const mapsUrlInput=document.getElementById('mapsUrl').value.trim();
  const phone=normalizePhone(document.getElementById('phone').value.trim());
  const customerCode=document.getElementById('customerCode').value.trim();
  const cccd=normalizeCCCD(document.getElementById('cccd').value.trim());
  const note=document.getElementById('note').value.trim();
  if(!officer || !name || !address) return alert('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß: C√°n b·ªô nh·∫≠p, T√™n, ƒê·ªãa ch·ªâ.');
  if(cccd && cccd.length!==12 && !confirm('CCCD kh√¥ng ƒë·ªß 12 s·ªë. V·∫´n l∆∞u?')) return;
  const mapsUrl=mapsUrlInput || mapsUrlFromAddress(address);
  const createdAt=nowISO();
  let pinSalt='',pinHash='';
  if(pin){ pinSalt=randomHex(8); pinHash=await sha256Hex(pinSalt+pin); }
  const item={ id:uid(12), code:uid(8), name, address, mapsUrl, createdAt, note, phone, branch, cccd, customerCode, officer, pinSalt, pinHash };
  items.unshift(item); saveItems(items); renderTable();
  remember('lastOfficer', officer);
  const statusEl=document.getElementById('createStatus');
  if(statusEl){
    statusEl.style.display='none'; // ·∫®n tr∆∞·ªõc khi l∆∞u
  }
  try{
    await saveToGitHub();
    if(statusEl){
      statusEl.textContent='ƒê√£ l∆∞u th√¥ng tin th√†nh c√¥ng l√™n GitHub!';
      statusEl.style.display='block';
      statusEl.style.color='#0a0';
    }
    // Flash animation th√†nh c√¥ng
    const card = document.querySelector('main > section.card:first-of-type');
    if(card) card.classList.add('flash-success');
    setTimeout(() => card?.classList.remove('flash-success'), 1200);
    // Ch·ªâ x√≥a form sau khi l∆∞u GitHub th√†nh c√¥ng
    for(const id of ['name','branch','address','mapsUrl','phone','customerCode','cccd','note']) document.getElementById(id).value='';
    // ·∫®n th√¥ng b√°o sau khi th√†nh c√¥ng (kh√¥ng ·∫©n khi l·ªói)
    setTimeout(()=>{ const el=document.getElementById('createStatus'); if(el) el.style.display='none'; }, 3000);
  }catch(e){
    if(statusEl){
      statusEl.textContent='L·ªói l∆∞u l√™n GitHub: ' + e.message;
      statusEl.style.display='block';
      statusEl.style.color='#c00';
    }
    console.error('GitHub save failed', e);
    // Kh√¥i ph·ª•c d·ªØ li·ªáu v·ªÅ tr·∫°ng th√°i tr∆∞·ªõc
    items = items.filter(x => x.id !== item.id);
    saveItems(items);
    renderTable();
  }
}
/* ========= ZIP & In A4 ========= */
function getSelectedItems(){ return items.filter(x=> selectedIds.has(x.id)); }
function dataURLtoBlob(dataURL){ const parts=dataURL.split(','); const bstr=atob(parts[1]); const u8=new Uint8Array(bstr.length); for(let i=0;i<bstr.length;i++) u8[i]=bstr.charCodeAt(i); return new Blob([u8],{type:'image/png'}); }
async function zipSelected(){
  const sel=getSelectedItems(); if(!sel.length) return alert('H√£y ch·ªçn √≠t nh·∫•t 1 d√≤ng.');
  const zip=new JSZip();
  for(const it of sel){
    const dataUrl=await makeQRDataUrl(it.mapsUrl,1024);
    const blob=dataURLtoBlob(dataUrl);
    const fname=`QR_${it.code}_${(it.name||'').replace(/\s+/g,'_').slice(0,50)}.png`;
    zip.file(fname,blob);
  }
  const out=await zip.generateAsync({type:'blob'});
  const a=document.createElement('a'); const url=URL.createObjectURL(out);
  a.href=url; a.download='qr_da_chon.zip'; a.click(); setTimeout(()=>URL.revokeObjectURL(url),1500);
}
async function printA4Selected(){
  const sel=getSelectedItems(); if(!sel.length) return alert('H√£y ch·ªçn √≠t nh·∫•t 1 d√≤ng.');
  const data=[]; for(const it of sel){ data.push({ it, qr:await makeQRDataUrl(it.mapsUrl,1024) }); }
  const win=window.open('','_blank');
  const tiles=data.map(d=>`
    <div class="tile">
      <img src="${d.qr}" />
      <div class="t">
        <div class="n">${escapeHtml(d.it.name)}</div>
        <div class="a">${escapeHtml(d.it.address||'')}</div>
        <div class="m">${escapeHtml(d.it.mapsUrl)}</div>
      </div>
    </div>`).join('');
  win.document.write(`<!doctype html><html><head><meta charset="utf-8"><title>In tem A4</title>
<style>
  @page{size:A4;margin:8mm}
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;margin:0}
  .actions{position:fixed;top:8px;right:8px}
  @media print{.actions{display:none}}
  .sheet{display:grid;grid-template-columns:repeat(3,1fr);gap:6mm;padding:8mm}
  .tile{border:1px dashed #ddd;padding:3mm;display:flex;gap:3mm;align-items:center}
  .tile img{width:28mm;height:28mm;object-fit:contain;border:1px solid #eee;border-radius:4mm;background:#fff}
  .t{font-size:3.2mm}.t .n{font-weight:700;margin-bottom:1mm}
  .t .m{font-family:ui-monospace,Menlo,Consolas,monospace;word-break:break-all;color:#555;font-size:3mm}
</style></head>
<body><div class="actions"><button onclick="window.print()">In</button></div>
<div class="sheet">${tiles}</div></body></html>`);
  win.document.close();
}

/* ========= QR helpers ========= */
async function makeQRDataUrl(text, size = 512){
  try{ await ensureQRCode(); }catch(e){}
  let lastErr = null;

  for (let i=0; i<3; i++){
    try{
      if (typeof QRCode === 'undefined') throw new Error('QRCode ch∆∞a s·∫µn s√†ng');

      const canvas = document.createElement('canvas');

      // Vi·ªÅn tr·∫Øng d√†y h∆°n ƒë·ªÉ ch·ªãu ƒë∆∞·ª£c bo/scale c·ªßa tr√¨nh duy·ªát
      await new Promise((resolve, reject)=>{
        QRCode.toCanvas(
          canvas, text,
          { width: size, margin: 4, errorCorrectionLevel: 'H' },
          err => err ? reject(err) : resolve()
        );
      });

      // ---- Logo: ch·ªâ ch√®n khi ·∫£nh ƒë·ªß l·ªõn (in/t·∫£i), KH√îNG ch√®n cho thumbnail ----
      const useLogo = QR_LOGO.enabled && size >= 300;
      if (useLogo){
        const img = await loadLogo();
        if (img){
          const ctx = canvas.getContext('2d');
          const logoSize = Math.round(size * 0.18);   // nh·ªè h∆°n ƒë·ªÉ an to√†n
          const pad      = Math.round(size * 0.04);
          const dx = Math.round((size - logoSize)/2);
          const dy = Math.round((size - logoSize)/2);

          // bo nh·∫π n·ªÅn logo (v·∫Ω ƒë√∫ng t√¢m, kh√¥ng ƒë√® g√≥c finder)
          ctx.save();
          ctx.fillStyle = '#fff';
          // D√πng ƒë√∫ng t√™n roundRect nh∆∞ ph·∫ßn g·ªçi
function roundRect(ctx, x, y, w, h, r){
  const rr = Math.min(r, w/2, h/2);
  ctx.beginPath();
  ctx.moveTo(x+rr, y);
  ctx.arcTo(x+w, y, x+w, y+h, rr);
  ctx.arcTo(x+w, y+h, x, y+h, rr);
  ctx.arcTo(x, y+h, x, y, rr);
  ctx.arcTo(x, y, x+w, y, rr);
  ctx.closePath();
}
          ctx.fill();
          ctx.restore();

          ctx.drawImage(img, dx, dy, logoSize, logoSize);
        }
      }
      // ------------------------------------------------------------------------

      return canvas.toDataURL('image/png');
    }catch(err){
      lastErr = err;
      await sleep(800);
    }
  }
  throw lastErr || new Error('Kh√¥ng t·∫°o ƒë∆∞·ª£c QR');
}
async function downloadQR(url,filename){
  try{ const a=document.createElement('a'); a.href=await makeQRDataUrl(url,1024); a.download=filename||'qr.png'; a.click(); }
  catch(e){ alert('Kh√¥ng t·∫°o ƒë∆∞·ª£c QR.'); }
}
async function openPrint(code, mode = 'full'){
  const it = items.find(x => x.code === code);
  if (!it) return;

  // M·ªü c·ª≠a s·ªï ngay khi click (tr√°nh ch·∫∑n pop-up)
  const win = window.open('', '_blank');
  if (!win) { alert('Tr√¨nh duy·ªát ƒëang ch·∫∑n pop-up. H√£y cho ph√©p m·ªü c·ª≠a s·ªï m·ªõi.'); return; }
  // T·∫°m n·ªôi dung "ƒëang t·∫°o"
  win.document.write('<!doctype html><meta charset="utf-8"><title>ƒêang t·∫°o QR...</title><body style="font-family:system-ui;padding:20px">ƒêang t·∫°o QR...</body>');
  win.document.close();

  let qr = '';
  try { qr = await makeQRDataUrl(it.mapsUrl, 1024); }
  catch (e) { win.close(); alert('Kh√¥ng t·∫°o ƒë∆∞·ª£c QR (m·∫°ng ch·∫≠m).'); return; }

  // Ghi n·ªôi dung cu·ªëi
  if (mode === 'qr'){
    win.document.open();
    win.document.write(`<!doctype html><html><head><meta charset="utf-8"><title>In QR ‚Äì ${escapeHtml(it.name)}</title>
<style>@page{size:A7;margin:8mm}body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;margin:0;display:flex;justify-content:center;align-items:center;height:100vh}
img{width:65mm;height:65mm;object-fit:contain;border:1px solid #eee;border-radius:12px}.actions{position:fixed;top:10px;right:10px}@media print{.actions{display:none}}</style></head>
<body><div class="actions"><button onclick="window.print()">In</button></div><img src="${qr}" alt="QR ${escapeHtml(it.name)}"/></body></html>`);
    win.document.close();
    return;
  }

  win.document.open();
  win.document.write(`<!doctype html><html><head><meta charset="utf-8"><title>In nh√£n ‚Äì ${escapeHtml(it.name)}</title>
<style>@page{size:A7;margin:6mm}body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;margin:0}
.label{display:flex;gap:12px;align-items:center;padding:10px}.qr{width:180px;height:180px;object-fit:contain;border:1px solid #eee;border-radius:12px}
h1{font-size:20px;margin:0 0 4px}.addr{color:#444}.meta{font-size:12px;color:#555;margin-top:6px}
.code{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;color:#666;font-size:12px;margin-top:4px}.actions{position:fixed;top:10px;right:10px}
@media print{.actions{display:none}}</style></head>
<body><div class="actions"><button onclick="window.print()">In</button></div>
<div class="label"><img class="qr" src="${qr}" alt="QR ${escapeHtml(it.name)}"/><div>
<h1>${escapeHtml(it.name)}</h1>
<div class="addr">${escapeHtml(it.address||'')}</div>
<div class="meta">C√°n b·ªô: ${escapeHtml(it.officer||'')} ‚Ä¢ Chi nh√°nh: ${escapeHtml(it.branch||'')}</div>
<div class="meta">M√£ KH: ${escapeHtml(it.customerCode||'')} ‚Ä¢ SƒêT: ${escapeHtml(it.phone||'')}</div>
<div class="meta">CCCD: ${escapeHtml(it.cccd||'')}</div>
<div class="meta">Ghi ch√∫: ${escapeHtml(it.note||'')}</div>
<div class="code">Maps: ${escapeHtml(it.mapsUrl)}</div>
</div></div></body></html>`);
  win.document.close();
}


/* ========= Map helpers ========= */
function gmLinkFromLatLng(lat,lng){ return `https://www.google.com/maps/search/?api=1&query=${lat.toFixed(6)},${lng.toFixed(6)}`; }
function openMapsTab(){ const addr=document.getElementById('address').value.trim(); const url=addr?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(addr)}`:'https://maps.google.com/'; window.open(url,'_blank'); }

function useCurrentPosition(){
  if (!('geolocation' in navigator)) return alert('Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ ƒë·ªãnh v·ªã.');
  navigator.geolocation.getCurrentPosition(
    async pos => {
      const { latitude: lat, longitude: lng } = pos.coords || {};
      document.getElementById('mapsUrl').value = gmLinkFromLatLng(lat, lng);
      // T·ª± ƒë·ªông ƒëi·ªÅn ƒë·ªãa ch·ªâ khi ch·ªçn v·ªã tr√≠ hi·ªán t·∫°i
      try{
        const addr = await reverseGeocode(lat, lng);
        const el = document.getElementById('address');
        if (addr) el.value = addr;
      }catch{}
    },
    () => alert('Kh√¥ng l·∫•y ƒë∆∞·ª£c v·ªã tr√≠ hi·ªán t·∫°i.'),
    { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }
  );
}

let map, marker, picked;
function openPickOnMap(){
  const modal=document.getElementById('mapModal');
  modal.classList.remove('hidden');
  document.body.classList.add('no-scroll');

  if (!map) {
    map = L.map('map', { zoomControl: true });
    map.setView([21.0278, 105.8342], 13);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19, attribution: '&copy; OpenStreetMap' }).addTo(map);
    map.on('click', (e) => setPicked(e.latlng));
  }

  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      (pos) => {
        const ll = [pos.coords.latitude, pos.coords.longitude];
        map.setView(ll, 16);
        setPicked({ lat: ll[0], lng: ll[1] });
        setTimeout(() => map.invalidateSize(), 60);
      },
      () => setTimeout(() => map.invalidateSize(), 60),
      { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }
    );
  } else {
    setTimeout(() => map.invalidateSize(), 60);
  }
}
function closePickOnMap(){
  document.getElementById('mapModal').classList.add('hidden');
  document.body.classList.remove('no-scroll');
}
function setPicked(latlng){
  picked = latlng;
  if (!marker) { marker = L.marker(latlng).addTo(map); } else { marker.setLatLng(latlng); }
  const info=document.getElementById('pickedInfo');
  if (info) info.textContent = `ƒê√£ ch·ªçn: ${latlng.lat.toFixed(6)}, ${latlng.lng.toFixed(6)}`;
}
async function reverseGeocode(lat,lng){ const res=await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${lat}&lon=${lng}`,{headers:{'Accept':'application/json'}}); if(!res.ok) return ''; const j=await res.json(); return j.display_name||''; }
async function searchPlaceByText(q){ const res=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(q)}&limit=1`,{headers:{'Accept':'application/json'}}); if(!res.ok) return null; const arr=await res.json(); if(!arr||!arr[0]) return null; return {lat:parseFloat(arr[0].lat),lng:parseFloat(arr[0].lon),label:arr[0].display_name}; }

/* ========= Render ========= */
function renderTable(){
  const wrap=document.getElementById('list'); if(!wrap){ console.warn('#list missing'); return; }
  let arr=items.slice(); const q=(document.getElementById('q').value||'').trim().toLowerCase();
  if(q){ arr=arr.filter(x=>[x.name,x.branch,x.customerCode,x.phone,x.officer].some(v=>String(v||'').toLowerCase().includes(q))); }
  if(!arr.length){ wrap.innerHTML='<div class="empty">Ch∆∞a c√≥ m·ª•c n√†o</div>'; return; }
  wrap.innerHTML=`
    <div class="table-wrap">
    <table>
      <thead><tr>
        <th><input type="checkbox" id="selAll" title="Ch·ªçn/B·ªè ch·ªçn t·∫•t c·∫£"></th>
        <th>QR</th>
        <th class="link-col">Link Maps</th>
        <th>T√™n</th>
        <th class="addr-col hide-sm">ƒê·ªãa ch·ªâ</th>
        <th class="hide-sm">C√°n b·ªô</th>
        <th>Chi nh√°nh</th>
        <th>M√£ KH</th>
        <th class="hide-sm">SƒêT</th>
        <th class="hide-sm">CCCD</th>
        <th class="hide-sm">M√£</th>
        <th>H√†nh ƒë·ªông</th>
      </tr></thead>
      <tbody>
        ${arr.map(x=>`
          <tr>
            <td><input type="checkbox" class="sel" data-id="${x.id}" ${selectedIds.has(x.id)?'checked':''}></td>
            <td><img class="qr" src="" data-code="${x.code}" /></td>
            <td class="link-col"><a class="code" href="${x.mapsUrl}" target="_blank">M·ªü</a></td>
            <td>${escapeHtml(x.name)}<div class="muted">${escapeHtml(x.note||'')}</div></td>
            <td class="addr-col hide-sm"><div class="addr-wrap">${escapeHtml(x.address||'')}</div></td>
            <td class="hide-sm">${escapeHtml(x.officer||'')}</td>
            <td>${escapeHtml(x.branch||'')}</td>
            <td class="code">${escapeHtml(x.customerCode||'')}</td>
            <td class="hide-sm">${escapeHtml(x.phone||'')}</td>
            <td class="hide-sm">${escapeHtml(x.cccd||'')}</td>
            <td class="code hide-sm">
              <span class="masked" data-id="${x.id}">********</span>
              <button class="toggle-code" data-id="${x.id}" title="Xem m√£" style="margin-left:6px;padding:2px 6px;border:1px solid #ddd;border-radius:6px;background:#fff;cursor:pointer">üëÅ</button>
            </td>
            <td class="inline-btns">
              <button data-act="print-qr" data-code="${x.code}">In QR</button>
              <span class="sep hide-sm">|</span>
              <button data-act="print-full" data-code="${x.code}">In ƒë·∫ßy ƒë·ªß</button>
              <span class="sep hide-sm">|</span>
              <button class="hide-sm" data-act="download" data-url="${escapeHtml(x.mapsUrl)}" data-code="${x.code}">T·∫£i QR</button>
              <span class="sep hide-sm">|</span>
              <button class="hide-sm" data-act="edit" data-id="${x.id}">S·ª≠a</button>
              <span class="sep hide-sm">|</span>
              <button class="btn-danger" data-act="delete" data-id="${x.id}">X√≥a</button>
            </td>
          </tr>`).join('')}
      </tbody>
    </table>
    </div>`;
  const imgs=wrap.querySelectorAll('img.qr');
  imgs.forEach(async img=>{ const code=img.getAttribute('data-code'); const it=items.find(x=>x.code===code); if(!it) return; try{ img.src=await makeQRDataUrl(it.mapsUrl,320); }catch{ setTimeout(async()=>{ try{ img.src=await makeQRDataUrl(it.mapsUrl,256);}catch{} },1200); } });
  const selAll=document.getElementById('selAll'); selAll.addEventListener('change',()=>{ if(selAll.checked){ arr.forEach(x=>selectedIds.add(x.id)); } else { arr.forEach(x=>selectedIds.delete(x.id)); } renderTable(); });
  wrap.querySelectorAll('input.sel').forEach(cb=> cb.addEventListener('change',(e)=>{ const id=e.target.getAttribute('data-id'); if(e.target.checked) selectedIds.add(id); else selectedIds.delete(id); }));
  wrap.querySelectorAll('[data-act]').forEach(btn=> btn.addEventListener('click', async (e)=>{
    const act=e.currentTarget.getAttribute('data-act');
    if(act==='print-qr') return openPrint(e.currentTarget.getAttribute('data-code'),'qr');
    if(act==='print-full') return openPrint(e.currentTarget.getAttribute('data-code'),'full');
    if(act==='download') return downloadQR(e.currentTarget.getAttribute('data-url'),'qr_'+e.currentTarget.getAttribute('data-code')+'.png');
    if(act==='edit') return editItem(e.currentTarget.getAttribute('data-id'));
    if(act==='delete') return delItem(e.currentTarget.getAttribute('data-id'));
  }));

  // Toggle show code via modal with password
 // ...existing code...
// ...existing code...
wrap.querySelectorAll('button.toggle-code').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    const id=btn.getAttribute('data-id');
    const row=items.find(x=>x.id===id);
    if(!row) return;
    // Modal x√°c nh·∫≠n nh·ªè, c√≥ nh·∫•p nh√°y ƒë·ªè
    const modal=document.createElement('div');
    modal.className='modal';
    modal.innerHTML=`
      <div class="content blink-red-infinite" style="width:min(480px,96vw);height:auto;padding:16px;">
        <div class="confirm-card">
          <h3 style="margin:0">Xem m√£?</h3>
          <div class="muted">Nh·∫≠p m√£ x√°c nh·∫≠n ƒë·ªÉ xem m√£ n√†y</div>
          <input id="viewCode" type="password" placeholder="Nh·∫≠p m√£..." style="padding:12px 14px;border:1px solid #ddd;border-radius:10px;">
          <div class="actions">
            <button id="viewCancel" class="btn-secondary">H·ªßy</button>
            <button id="viewOk" class="btn-primary">Xem</button>
          </div>
        </div>
      </div>`;
    document.body.appendChild(modal);
    const close=()=> modal.remove();
    modal.addEventListener('click',(e)=>{ if(e.target===modal) close(); });
    modal.querySelector('#viewCancel')?.addEventListener('click', close);
    modal.querySelector('#viewOk')?.addEventListener('click', ()=>{
      const code=(document.getElementById('viewCode')?.value||'').trim();
      if(code!=='Adme@nPC'){
        const box=modal.querySelector('.content');
        box?.classList.add('blink-red');
        setTimeout(()=> box?.classList.remove('blink-red'), 900);
        return;
      }
      const span=wrap.querySelector(`span.masked[data-id="${id}"]`);
      if(span){ span.textContent=row.code; }
      close();
    });
  });
});
// ...existing code...
}

/* ========= Delete / Edit ========= */
// ...existing code...
async function delItem(id){
  const it=items.find(x=>x.id===id); if(!it) return;
  const codeInput=prompt('Nh·∫≠p M√£ (code) c·ªßa m·ª•c n√†y ƒë·ªÉ x√°c nh·∫≠n x√≥a:')||'';
  if(String(codeInput).trim()!==String(it.code).trim()) return alert('M√£ kh√¥ng ƒë√∫ng.');
  if(!confirm('X√≥a m·ª•c n√†y?')) return;
  
  // L∆∞u tr·∫°ng th√°i tr∆∞·ªõc khi x√≥a
  const originalItems = [...items];
  items=items.filter(x=>x.id!==id); 
  saveItems(items); 
  renderTable();
  
  try { 
    await saveToGitHub(); 
    showStatus('ƒê√£ x√≥a th√†nh c√¥ng l√™n GitHub!', 'success');
  } catch(e) { 
    console.error('GitHub save failed', e);
    // Kh√¥i ph·ª•c d·ªØ li·ªáu v·ªÅ tr·∫°ng th√°i tr∆∞·ªõc
    items = originalItems;
    saveItems(items);
    renderTable();
    showStatus('L·ªói x√≥a l√™n GitHub: ' + e.message, 'error');
  }
}
async function editItem(id){
  const it=items.find(x=>x.id===id); if(!it) return;
  const codeInput=prompt('Nh·∫≠p M√£ (code) c·ªßa m·ª•c n√†y ƒë·ªÉ ch·ªânh s·ª≠a:')||'';
  if(String(codeInput).trim()!==String(it.code).trim()) return alert('M√£ kh√¥ng ƒë√∫ng.');
  const name=prompt('T√™n ƒë·ªãa ƒëi·ªÉm:', it.name) ?? it.name;
  const address=prompt('ƒê·ªãa ch·ªâ:', it.address||'') ?? it.address;
  const mapsUrl=prompt('Link Maps:', it.mapsUrl||'') ?? it.mapsUrl;
  const note=prompt('Ghi ch√∫:', it.note||'') ?? it.note;
  const phone=prompt('SƒêT:', it.phone||'') ?? it.phone;
  const branch=prompt('Chi nh√°nh:', it.branch||'') ?? it.branch;
  const cccd=prompt('CCCD:', it.cccd||'') ?? it.cccd;
  const customerCode=prompt('M√£ KH:', it.customerCode||'') ?? it.customerCode;
  
  // L∆∞u tr·∫°ng th√°i tr∆∞·ªõc khi s·ª≠a
  const originalItems = [...items];
  Object.assign(it,{ name,address,mapsUrl,note,phone,branch,cccd,customerCode }); 
  saveItems(items); 
  renderTable();
  
  try { 
    await saveToGitHub(); 
    showStatus('ƒê√£ s·ª≠a th√†nh c√¥ng l√™n GitHub!', 'success');
  } catch(e) { 
    console.error('GitHub save failed', e);
    // Kh√¥i ph·ª•c d·ªØ li·ªáu v·ªÅ tr·∫°ng th√°i tr∆∞·ªõc
    items = originalItems;
    saveItems(items);
    renderTable();
    showStatus('L·ªói s·ª≠a l√™n GitHub: ' + e.message, 'error');
  }
}

/* ========= Quick Print ========= */
document.getElementById('btnQuickPrint')?.addEventListener('click', async ()=>{
  const officer=document.getElementById('officer').value.trim();
  const name=document.getElementById('name').value.trim();
  const address=document.getElementById('address').value.trim();
  const mapsUrlInput=document.getElementById('mapsUrl').value.trim();
  const phone=normalizePhone(document.getElementById('phone').value.trim());
  const branch=document.getElementById('branch').value.trim();
  const customerCode=document.getElementById('customerCode').value.trim();
  const cccd=normalizeCCCD(document.getElementById('cccd').value.trim());
  const note=document.getElementById('note').value.trim();
  const mapsUrl=mapsUrlInput || (address?mapsUrlFromAddress(address):'');
  if(!name || !mapsUrl){ return alert('ƒê·ªÉ In QR nhanh: c·∫ßn √≠t nh·∫•t T√™n v√† (ƒê·ªãa ch·ªâ ho·∫∑c Link Maps).'); }
  const it={ name,address,mapsUrl,officer,branch,customerCode,cccd,phone,note };
  let qr=''; try{ qr=await makeQRDataUrl(mapsUrl,1024); }catch(e){ alert('Kh√¥ng t·∫°o ƒë∆∞·ª£c QR (m·∫°ng ch·∫≠m).'); return; }
  const win=window.open('','_blank');
  win.document.write(`<!doctype html><html><head><meta charset="utf-8"><title>In nh√£n nhanh ‚Äì ${escapeHtml(it.name)}</title><style>@page{size:A7;margin:6mm}body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;margin:0}.label{display:flex;gap:12px;align-items:center;padding:10px}.qr{width:180px;height:180px;object-fit:contain;border:1px solid #eee;border-radius:12px}h1{font-size:20px;margin:0 0 4px}.addr{color:#444}.meta{font-size:12px;color:#555;margin-top:6px}.code{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;color:#666;font-size:12px;margin-top:4px}.actions{position:fixed;top:10px;right:10px}@media print{.actions{display:none}}</style></head><body><div class="actions"><button onclick="window.print()">In</button></div><div class="label"><img class="qr" src="${qr}" alt="QR ${escapeHtml(it.name)}"/><div><h1>${escapeHtml(it.name)}</h1><div class="addr">${escapeHtml(it.address||'')}</div><div class="meta">C√°n b·ªô: ${escapeHtml(it.officer||'')} ‚Ä¢ Chi nh√°nh: ${escapeHtml(it.branch||'')}</div><div class="meta">M√£ KH: ${escapeHtml(it.customerCode||'')} ‚Ä¢ SƒêT: ${escapeHtml(it.phone||'')}</div><div class="meta">CCCD: ${escapeHtml(it.cccd||'')}</div><div class="meta">Ghi ch√∫: ${escapeHtml(it.note||'')}</div><div class="code">Maps: ${escapeHtml(it.mapsUrl)}</div></div></div></body></html>`); win.document.close();
});

/* ========= GitHub Integration ========= */
const GH_DEFAULT={ owner:'tvnghp', repo:'QR', branch:'main', path:'data.xlsx' };
/* ========= GitHub-only Boot ========= */
function renderLoading(msg){
  const wrap=document.getElementById('list');
  if(!wrap) return;
  wrap.innerHTML = `<div class="table-wrap"><div class="empty">${escapeHtml(msg)}</div></div>`;
}
function renderError(msg){
  const wrap=document.getElementById('list');
  if(!wrap) return;
  wrap.innerHTML = `<div class="table-wrap flash-danger"><div class="empty">${escapeHtml(msg)}</div></div>`;
}

/*async function githubBoot(){
  renderLoading('ƒêang t·∫£i d·ªØ li·ªáu t·ª´ GitHub‚Ä¶');

  const token = getGhToken(); // d√πng h√†m b·∫°n ƒë√£ c√≥ ·ªü modal token
  if(!token){
    renderError('Ch∆∞a thi·∫øt l·∫≠p GitHub Token. B·∫•m ‚ÄúThi·∫øt l·∫≠p Token‚Äù ƒë·ªÉ nh·∫≠p PAT.');
    // m·ªü s·∫µn modal cho ti·ªán
    if(typeof openTokenModal==='function') openTokenModal();
    return;
  }

  try{
    const ok = await loadFromGitHub(); // CH·ªà t·∫£i t·ª´ GitHub
    if(!ok){
      renderError('Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu t·ª´ GitHub. Ki·ªÉm tra PAT/quy·ªÅn repo r·ªìi th·ª≠ l·∫°i.');
      if(typeof openTokenModal==='function') openTokenModal();
      return;
    }
    // Th√†nh c√¥ng ‚Üí hi·ªÉn th·ªã b·∫£ng + (tu·ª≥ ch·ªçn) cache sang localStorage
    saveItems(items);
    renderTable();
    showStatus('ƒê√£ n·∫°p d·ªØ li·ªáu t·ª´ GitHub', 'success');
  }catch(e){
    console.error(e);
    renderError('L·ªói t·∫£i t·ª´ GitHub. M·ªü ‚ÄúThi·∫øt l·∫≠p Token‚Äù ƒë·ªÉ ki·ªÉm tra l·∫°i.');
    if(typeof openTokenModal==='function') openTokenModal();
  }
}*/
/* ========= Boot: ∆∞u ti√™n GitHub, fallback data.xlsx (kh√¥ng LocalStorage) ========= */
function renderLoading(msg){
  const wrap=document.getElementById('list');
  if(wrap) wrap.innerHTML = `<div class="table-wrap"><div class="empty">${escapeHtml(msg)}</div></div>`;
}
function renderError(msg){
  const wrap=document.getElementById('list');
  if(wrap) wrap.innerHTML = `<div class="table-wrap flash-danger"><div class="empty">${escapeHtml(msg)}</div></div>`;
}

async function githubBoot(){
  renderLoading('ƒêang t·∫£i d·ªØ li·ªáu t·ª´ GitHub‚Ä¶');

  // L·∫•y PAT t·ª´ modal/token helper c·ªßa b·∫°n (kh√¥ng ƒë·ª•ng LocalStorage n·∫øu b·∫°n ƒë√£ no-op)
  const token = (typeof getGhToken==='function') ? getGhToken() : (window.GH_TOKEN || '');

  let ok = false;
  if(token){                       // C√≥ token th√¨ th·ª≠ GitHub tr∆∞·ªõc
    try { ok = await loadFromGitHub(); } catch { ok = false; }
  }

  if(!ok){
    renderLoading('Kh√¥ng t·∫£i ƒë∆∞·ª£c t·ª´ GitHub. ƒêang d√πng d·ªØ li·ªáu c·ª•c b·ªô (data.xlsx)‚Ä¶');
    const okLocal = await loadFromLocalXlsx();
    if(okLocal){
      renderTable();
      showStatus('ƒê√£ n·∫°p t·ª´ data.xlsx (fallback).', 'info');
    }else{
      renderError('Kh√¥ng t·∫£i ƒë∆∞·ª£c d·ªØ li·ªáu: GitHub l·ªói v√† c≈©ng kh√¥ng t√¨m th·∫•y data.xlsx.');
    }
    return;
  }

  // Th√†nh c√¥ng t·ª´ GitHub
  renderTable();
  showStatus('ƒê√£ n·∫°p d·ªØ li·ªáu t·ª´ GitHub', 'success');
}


/* G·ªçi boot khi DOM s·∫µn s√†ng (sau khi ƒë√£ ƒë·ªãnh nghƒ©a GH_DEFAULT & loadFromGitHub) */
addEventListener('DOMContentLoaded', () => {
  // G·ªåI S·ªöM NH·∫§T TRONG HANDLER
  githubBoot();
});

let ghShaCache=null;
  /* ==== GitHub Token (Base64) ====
   L∆∞u √Ω: Base64 ch·ªâ l√† m√£ ho√°/obfuscation nh·∫π, KH√îNG b·∫£o m·∫≠t tuy·ªát ƒë·ªëi.
   C√°ch d√πng:
     - Option 1 (ƒë·ªÅ xu·∫•t): L∆∞u token v√†o localStorage (ƒë∆∞·ª£c m√£ ho√° base64):
          localStorage.setItem('gh_token_b64', btoa('ghp_xxx_your_token_here'));
     - Option 2: Nh√∫ng tr·ª±c ti·∫øp token (base64) v√†o file n√†y b·∫±ng c√°ch ƒëi·ªÅn v√†o GH_TOKEN_B64_FILE.
*/
// ====== Token (base64) ‚Äì L∆ØU √ù: kh√¥ng commit PAT th·∫≠t v√†o repo public ======
const GH_TOKEN_B64_FILE = 'Z2l0aHViX3BhdF8xMUFZS0lFTlkwbXcwalJNbzg3cThOX3E5a2pKa0pjZERhTzIycGJJc2NEVExOdGhKcjJBMFppaVhhMkwzZ1RmSEtIUEgyNUlGWGFvMWVzejNy'; // c√≥ th·ªÉ ƒë·ªÉ tr·ªëng ''

function getGhTokenB64(){
  try { return localStorage.getItem('gh_token_b64') || GH_TOKEN_B64_FILE || ''; }
  catch { return GH_TOKEN_B64_FILE || ''; }
}
function getGhToken(){
  const b64 = getGhTokenB64();
  try { return b64 ? atob(b64) : ''; } catch { return ''; }
}
function maskToken(t){
  if(!t) return '(ch∆∞a c√≥)';
  if(t.length <= 10) return t[0] + '***' + t.slice(-2);
  return t.slice(0,6) + '...' + t.slice(-4);
}


// Helper ƒë·ªÉ set token d·∫°ng text r·ªìi t·ª± l∆∞u base64 v√†o localStorage (g·ªçi trong console n·∫øu c·∫ßn)
function setGithubTokenPlain(tokenText){
  try {
    if (!tokenText || !tokenText.trim()) throw new Error('Token r·ªóng');
    localStorage.setItem('gh_token_b64', btoa(tokenText.trim()));
    console.log('ƒê√£ l∆∞u token (base64) v√†o localStorage: gh_token_b64');
  } catch (e) {
    console.error('Kh√¥ng th·ªÉ l∆∞u token:', e);
    alert('Kh√¥ng th·ªÉ l∆∞u token: ' + e.message);
  }
}

  const GH_COMMIT_MESSAGE='C·∫≠p nh·∫≠t data.xlsx t·ª´ c√¥ng c·ª• QR';

// T·∫£i d·ªØ li·ªáu tr·ª±c ti·∫øp t·ª´ GitHub
async function loadFromGitHub() {
  try {
    const url = `https://api.github.com/repos/${GH_DEFAULT.owner}/${GH_DEFAULT.repo}/contents/${encodeURIComponent(GH_DEFAULT.path)}?ref=${encodeURIComponent(GH_DEFAULT.branch)}`;
    const response = await fetch(url, {
      headers: {
        'Accept': 'application/vnd.github+json',
        'Authorization': 'token ' + getGhToken()
      }
    });
    
    if (!response.ok) {
      throw new Error(`GitHub API ${response.status}: ${await response.text()}`);
    }
    
    const fileData = await response.json();
    ghShaCache = fileData.sha || null;
    
    // T·∫£i n·ªôi dung file Excel
    const contentResponse = await fetch(fileData.download_url);
    if (!contentResponse.ok) {
      throw new Error('Kh√¥ng t·∫£i ƒë∆∞·ª£c n·ªôi dung file');
    }
    
    const arrayBuffer = await contentResponse.arrayBuffer();
    const workbook = XLSX.read(arrayBuffer, { type: 'array' });
    const worksheet = workbook.Sheets[workbook.SheetNames[0]];
    
    if (worksheet) {
      const rows = sheetToJsonStrict(worksheet);
      items = rows.filter(row => row.name && (row.address || row.mapsUrl));
      items.sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));
      console.log(`ƒê√£ t·∫£i ${items.length} m·ª•c t·ª´ GitHub`);
      return true;
    }
  } catch (error) {
    console.error('L·ªói t·∫£i t·ª´ GitHub:', error);
    return false;
  }
  return false;
}
// Fallback: n·∫°p t·ª´ file data.xlsx n·∫±m c·∫°nh index.html (kh√¥ng d√πng localStorage)
async function loadFromLocalXlsx(){
  try{
    const res = await fetch('data.xlsx?t='+Date.now(), { cache: 'no-store' });
    if(!res.ok) throw new Error('HTTP '+res.status);
    const buf = await res.arrayBuffer();
    const wb  = XLSX.read(buf, { type: 'array' });
    const ws  = wb.Sheets[wb.SheetNames[0]];
    if(!ws) throw new Error('Kh√¥ng t√¨m th·∫•y sheet ƒë·∫ßu ti√™n');

    const rows = sheetToJsonStrict(ws);
    items = rows.filter(r => r.name && (r.address || r.mapsUrl));
    items.sort((a,b)=> new Date(b.createdAt||0) - new Date(a.createdAt||0));
    return true;
  }catch(e){
    console.error('L·ªói fallback local:', e);
    return false;
  }
}

// L∆∞u d·ªØ li·ªáu l√™n GitHub
async function saveToGitHub() {
  // Helper: l·∫•y SHA hi·ªán t·∫°i c·ªßa file (n·∫øu t·ªìn t·∫°i)
  async function fetchCurrentSha(){
    const getUrl = `https://api.github.com/repos/${GH_DEFAULT.owner}/${GH_DEFAULT.repo}/contents/${encodeURIComponent(GH_DEFAULT.path)}?ref=${encodeURIComponent(GH_DEFAULT.branch)}`;
    const res = await fetch(getUrl, { headers: { 'Accept':'application/vnd.github+json', 'Authorization':'token ' + getGhToken } });
    if (res.status === 404) return null; // file ch∆∞a t·ªìn t·∫°i
    if (!res.ok) throw new Error(`GitHub API ${res.status}: ${await res.text()}`);
    const j = await res.json();
    return j && j.sha ? j.sha : null;
  }

  // T·∫°o workbook Excel m·ªõi
  const workbook = new ExcelJS.Workbook();
  const worksheet = workbook.addWorksheet('locations');

  // ƒê·ªãnh nghƒ©a c·ªôt
  const columns = ['id', 'code', 'name', 'address', 'mapsUrl', 'createdAt', 'note', 'phone', 'branch', 'cccd', 'customerCode', 'officer', 'pinSalt', 'pinHash'];
  worksheet.columns = columns.map(col => ({
    header: col,
    key: col,
    width: col === 'mapsUrl' ? 60 : (col === 'address' ? 40 : (col === 'name' ? 30 : 18))
  }));

  // Th√™m d·ªØ li·ªáu
  worksheet.addRows(items);
  worksheet.views = [{ state: 'frozen', ySplit: 1 }];

  // Chuy·ªÉn th√†nh buffer
  const buffer = await workbook.xlsx.writeBuffer();
  const base64 = btoa(String.fromCharCode(...new Uint8Array(buffer)));

  // Chu·∫©n b·ªã body v√† SHA
  let currentSha = ghShaCache;
  if (!currentSha) {
    try { currentSha = await fetchCurrentSha(); } catch(e) { console.warn('Kh√¥ng l·∫•y ƒë∆∞·ª£c SHA hi·ªán t·∫°i:', e.message); }
  }
  let body = { message: GH_COMMIT_MESSAGE, content: base64, branch: GH_DEFAULT.branch };
  if (currentSha) body.sha = currentSha;

  const url = `https://api.github.com/repos/${GH_DEFAULT.owner}/${GH_DEFAULT.repo}/contents/${encodeURIComponent(GH_DEFAULT.path)}`;

  async function putOnce(payload){
    const res = await fetch(url, {
      method: 'PUT',
      headers: {
        'Accept': 'application/vnd.github+json',
        'Authorization': 'token ' + getGhToken(),
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(payload)
    });
    return res;
  }

  // L·∫ßn 1
  let response = await putOnce(body);
  if (!response.ok && (response.status === 422 || response.status === 409)) {
    // C√≥ th·ªÉ do thi·∫øu/kh√¥ng ƒë√∫ng SHA -> l·∫•y l·∫°i SHA v√† th·ª≠ l·∫°i 1 l·∫ßn
    try { currentSha = await fetchCurrentSha(); } catch(e) { currentSha = null; }
    body = { message: GH_COMMIT_MESSAGE, content: base64, branch: GH_DEFAULT.branch };
    if (currentSha) body.sha = currentSha;
    response = await putOnce(body);
  }

  if (!response.ok) {
    const errorText = await response.text();
    throw new Error(`GitHub API ${response.status}: ${errorText}`);
  }

  const result = await response.json();
  ghShaCache = (result.content && result.content.sha) || null;
  console.log('ƒê√£ commit th√†nh c√¥ng l√™n GitHub');
  return true;
}

// ƒê·ªìng b·ªô d·ªØ li·ªáu v·ªõi GitHub
async function syncWithGitHub() {
  try {
    const success = await loadFromGitHub();
    if (success) {
      renderTable();
      showStatus('ƒê√£ ƒë·ªìng b·ªô d·ªØ li·ªáu t·ª´ GitHub', 'success');
    } else {
      showStatus('Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu t·ª´ GitHub', 'error');
    }
  } catch (error) {
    showStatus('L·ªói ƒë·ªìng b·ªô: ' + error.message, 'error');
  }
}

// Hi·ªÉn th·ªã tr·∫°ng th√°i
function showStatus(message, type = 'info') {
  const statusEl = document.getElementById('createStatus');
  if (statusEl) {
    statusEl.textContent = message;
    statusEl.style.display = 'block';
    statusEl.style.color = type === 'success' ? '#0a0' : type === 'error' ? '#c00' : '#666';
    
    setTimeout(() => {
      statusEl.style.display = 'none';
    }, 5000);
  }
}

/* ========= DOMContentLoaded ========= */
addEventListener('DOMContentLoaded', () => {
  const of=document.getElementById('officer'); if(of) of.value=recall('lastOfficer');
  const pin=document.getElementById('pin'); if(pin) pin.value=recall('lastPin');

  document.getElementById('btnCreate')?.addEventListener('click', ()=>handleCreate().catch(console.error));
  document.getElementById('btnReset')?.addEventListener('click', ()=>{ for(const id of ['name','branch','address','mapsUrl','phone','customerCode','cccd','note']) document.getElementById(id).value=''; });
  document.getElementById('q')?.addEventListener('input', renderTable);

  document.getElementById('btnZipSelected')?.addEventListener('click', ()=> zipSelected().catch(console.error));
  document.getElementById('btnPrintA4')?.addEventListener('click', ()=> printA4Selected().catch(console.error));
  // removed demo add button and handler
  document.getElementById('btnClearAll')?.addEventListener('click', ()=>{
    // T·∫°o modal x√°c nh·∫≠n (thay prompt/confirm)
    const modal=document.createElement('div');
    modal.className='modal';
    modal.id='clearModal';
    modal.innerHTML=`
      <div class="content blink-red-infinite">
        <div class="confirm-card">
          <h3 style="margin:0">X√≥a to√†n b·ªô d·ªØ li·ªáu?</h3>
          <div class="muted">Nh·∫≠p m√£ x√°c nh·∫≠n ƒë·ªÉ ti·∫øp t·ª•c</div>
          <input id="clearCode" type="password" placeholder="Nh·∫≠p m√£..." style="padding:12px 14px;border:1px solid #ddd;border-radius:10px;">
          <div class="actions">
            <button id="clearCancel" class="btn-secondary">H·ªßy</button>
            <button id="clearOk" class="btn-danger">X√≥a</button>
          </div>
        </div>
      </div>`;
    document.body.appendChild(modal);
    const close=()=> modal.remove();
    modal.addEventListener('click',(e)=>{ if(e.target===modal) close(); });
    modal.querySelector('#clearCancel')?.addEventListener('click', close);
        // ...existing code...
    modal.querySelector('#clearOk')?.addEventListener('click', async ()=>{
      const code=(document.getElementById('clearCode')?.value||'').trim();
      if(code!=='Adme@nPC'){
        const box=modal.querySelector('.content');
        box?.classList.add('blink-red');
        setTimeout(()=> box?.classList.remove('blink-red'), 900);
        return;
      }
      const listCard=document.querySelector('main > section.card:nth-of-type(2)');
      const listWrap=document.querySelector('#list .table-wrap') || document.getElementById('list');
      if(listWrap) listWrap.classList.add('flash-danger');
      if(listCard) listCard.classList.add('flash-danger');
      setTimeout(async ()=>{
        if(listWrap) listWrap.classList.remove('flash-danger');
        if(listCard) listCard.classList.remove('flash-danger');
                 items=[]; saveItems(items); renderTable();
         try { 
           await saveToGitHub(); 
           showStatus('ƒê√£ x√≥a to√†n b·ªô th√†nh c√¥ng l√™n GitHub!', 'success');
         } catch(e) { 
           console.error('GitHub save failed', e);
           showStatus('L·ªói x√≥a to√†n b·ªô l√™n GitHub: ' + e.message, 'error');
         }
         close();
      }, 1200);
    });    
  });

  // Map helpers + modal
  document.getElementById('btnUseCurrent')?.addEventListener('click', useCurrentPosition);
  document.getElementById('btnPickOnMap')?.addEventListener('click', openPickOnMap);
  document.getElementById('btnOpenMaps')?.addEventListener('click', openMapsTab);
  document.getElementById('btnCloseModal')?.addEventListener('click', closePickOnMap);
  // Thi·∫øt l·∫≠p Token GitHub (obfuscate, l∆∞u localStorage v√† t·ª± copy)
  /*document.getElementById('btnSetToken')?.addEventListener('click', async ()=>{
    const input = prompt('Nh·∫≠p GitHub Personal Access Token (PAT):', '');
    if(!input) return;
    try{
      const obf = ghObfEncode(input, GH_XOR_KEY);
      localStorage.setItem('gh_token_obf', obf);
      try{ await navigator.clipboard.writeText(obf); }catch{}
      alert('ƒê√£ l∆∞u token (obfuscate) v√†o tr√¨nh duy·ªát v√† sao ch√©p chu·ªói obfuscate v√†o clipboard.\nH√£y d√°n v√†o code (GH_TOKEN_FALLBACK) n·∫øu mu·ªën c·ªë ƒë·ªãnh, ho·∫∑c ch·ªâ c·∫ßn refresh ƒë·ªÉ d√πng token trong tr√¨nh duy·ªát.');
    }catch(e){ alert('Kh√¥ng l∆∞u ƒë∆∞·ª£c token: '+e.message); }
  });*/
  document.getElementById('btnUseCoords')?.addEventListener('click', async () => {
    if (!picked) return alert('H√£y b·∫•m v√†o b·∫£n ƒë·ªì ƒë·ªÉ ch·ªçn v·ªã tr√≠.');
    document.getElementById('mapsUrl').value = gmLinkFromLatLng(picked.lat, picked.lng);
    try{
      const addr = await reverseGeocode(picked.lat, picked.lng);
      if (addr) document.getElementById('address').value = addr;
    }catch{}
    closePickOnMap();
  });
  document.getElementById('btnReverseAddress')?.addEventListener('click', async () => {
    if (!picked) return alert('Ch∆∞a c√≥ t·ªça ƒë·ªô.');
    const addr = await reverseGeocode(picked.lat, picked.lng);
    if (addr) document.getElementById('address').value = addr;
  });
  document.getElementById('searchPlace')?.addEventListener('keydown', async (e)=>{ if(e.key!=='Enter') return; e.preventDefault(); const q=e.target.value.trim(); if(!q) return; const r=await searchPlaceByText(q); if(!r) return alert('Kh√¥ng t√¨m th·∫•y ƒë·ªãa ch·ªâ.'); map.setView([r.lat,r.lng],17); setPicked({lat:r.lat,lng:r.lng}); });

  // Scan QR t·ª´ ·∫£nh
  const btnScan=document.getElementById('btnScan'); const scanFile=document.getElementById('scanFile');
  btnScan?.addEventListener('click', ()=> scanFile.click());
  scanFile?.addEventListener('change', async (e)=>{ const file=e.target.files?.[0]; if(!file) return;
    try{
      if('BarcodeDetector' in window){
        const det=new BarcodeDetector({formats:['qr_code']});
        const bmp=await createImageBitmap(file);
        const cvs=document.createElement('canvas'); cvs.width=bmp.width; cvs.height=bmp.height; const ctx=cvs.getContext('2d'); ctx.drawImage(bmp,0,0);
        const codes=await det.detect(cvs);
        if(codes && codes[0]){ document.getElementById('mapsUrl').value=codes[0].rawValue; alert('ƒê√£ l·∫•y link t·ª´ QR.'); }
        else alert('Kh√¥ng ƒë·ªçc ƒë∆∞·ª£c QR trong ·∫£nh.');
      } else { alert('Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ qu√©t QR tr·ª±c ti·∫øp.'); }
    }catch(err){ console.error(err); alert('Kh√¥ng qu√©t ƒë∆∞·ª£c QR.'); } finally{ e.target.value=''; }
  });

     // N√∫t ƒë·ªìng b·ªô GitHub
   document.getElementById('btnSyncGitHub')?.addEventListener('click', ()=>{
     syncWithGitHub().catch(console.error);
   });

  // Footer year & GH bind
  const yEl=document.getElementById('yearNow'); if(yEl) yEl.textContent=new Date().getFullYear();
});
// ====== Token Modal ‚Äì m·ªü/ƒë√≥ng v√† thao t√°c ======
function openTokenModal(){
  const m = document.getElementById('tokenModal');
  updateTokenModalUI();
  m.classList.remove('hidden');
  document.body.classList.add('no-scroll');
}
function closeTokenModal(){
  const m = document.getElementById('tokenModal');
  m.classList.add('hidden');
  document.body.classList.remove('no-scroll');
}
function updateTokenModalUI(){
  const plain = getGhToken();
  const b64 = getGhTokenB64();
  const st = document.getElementById('tokStatus');
  const pv = document.getElementById('tokPreview');
  const b64El = document.getElementById('tokB64');
  if(st) st.textContent = plain ? 'ƒê√É THI·∫æT L·∫¨P' : 'CH∆ØA THI·∫æT L·∫¨P';
  if(pv) pv.textContent = maskToken(plain);
  if(b64El) b64El.value = b64;
  const inp = document.getElementById('tokPlain');
  if(inp) inp.value = '';
}

document.getElementById('btnSetToken')?.addEventListener('click', openTokenModal);

// N√∫t l∆∞u (ghi base64 v√†o localStorage)
document.addEventListener('click', async (e)=>{
  const t = e.target;

  if(t.id === 'tokSaveLS'){
    const raw = (document.getElementById('tokPlain')?.value || '').trim();
    if(!raw){ alert('Vui l√≤ng nh·∫≠p PAT (ghp_‚Ä¶ ho·∫∑c github_pat_‚Ä¶)'); return; }
    try{
      localStorage.setItem('gh_token_b64', btoa(raw));
      updateTokenModalUI();
      alert('ƒê√£ l∆∞u token v√†o tr√¨nh duy·ªát (base64). B·∫°n c√≥ th·ªÉ th·ª≠ ‚ÄúüîÑ ƒê·ªìng b·ªô GitHub‚Äù.');
    }catch(err){ alert('Kh√¥ng th·ªÉ l∆∞u token: '+err.message); }
  }

  // M√£ ho√° √¥ plain v√† copy Base64
  if(t.id === 'tokCopyB64FromPlain'){
    const raw = (document.getElementById('tokPlain')?.value || '').trim();
    if(!raw){ alert('Nh·∫≠p PAT ·ªü √¥ tr√™n tr∆∞·ªõc ƒë√£.'); return; }
    const b64 = btoa(raw);
    try{ await navigator.clipboard.writeText(b64); alert('ƒê√£ copy Base64 t·ª´ √¥ nh·∫≠p.'); }
    catch{ prompt('Copy chu·ªói Base64:', b64); }
  }

  // Copy Base64 hi·ªán c√≥ (ƒëang l∆∞u)
  if(t.id === 'tokCopyB64Current'){
    const b64 = (document.getElementById('tokB64')?.value || '').trim();
    if(!b64){ alert('Ch∆∞a c√≥ token trong localStorage.'); return; }
    try{ await navigator.clipboard.writeText(b64); alert('ƒê√£ copy Base64 hi·ªán c√≥.'); }
    catch{ prompt('Copy chu·ªói Base64:', b64); }
  }

  // Xo√° token kh·ªèi localStorage
  if(t.id === 'tokDelete'){
    try{ localStorage.removeItem('gh_token_b64'); updateTokenModalUI(); alert('ƒê√£ xo√° token kh·ªèi tr√¨nh duy·ªát.'); }
    catch(err){ alert('Kh√¥ng xo√° ƒë∆∞·ª£c: '+err.message); }
  }

  // ƒê√≥ng modal
  if(t.id === 'tokClose' || t.id === 'tokenModal'){
    if(t.id === 'tokenModal') { // click n·ªÅn t·ªëi
      const content = document.querySelector('#tokenModal .content');
      if(content && content.contains(e.target)) return; // click b√™n trong -> b·ªè qua
    }
    closeTokenModal();
  }
});


</script>

<!-- Modal Map Picker -->
<div id="mapModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="mapTitle">
  <div class="content">
    <div style="display:flex; align-items:center; gap:8px; margin-bottom:8px;">
      <h3 id="mapTitle" style="margin:0; font-size:16px;">Ch·ªçn v·ªã tr√≠ tr√™n b·∫£n ƒë·ªì</h3>
      <div style="flex:1"></div>
      <button id="btnCloseModal" class="btn-secondary" type="button">ƒê√≥ng</button>
    </div>
    <div id="map"></div>
    <div class="actions" style="margin-top:10px;">
      <input id="searchPlace" type="text" placeholder="T√¨m ƒë·ªãa ch·ªâ (Enter)" style="flex:1; min-width:180px; padding:10px 10px; border:1px solid #ddd; border-radius:10px;" />
      <button id="btnUseCoords" class="btn-primary" type="button">D√πng t·ªça ƒë·ªô n√†y</button>
      <button id="btnReverseAddress" class="btn-secondary" type="button">Th·ª≠ l·∫•y ƒë·ªãa ch·ªâ</button>
    </div>
    <div id="pickedInfo" class="muted" style="margin-top:6px; min-height:18px;"></div>
  </div>
</div>
<!-- Modal Thi·∫øt l·∫≠p Token -->
<div id="tokenModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="tokenTitle">
  <div class="content" style="width:min(560px,96vw);height:auto;padding:16px;">
    <div style="display:flex; align-items:center; gap:8px; margin-bottom:8px;">
      <h3 id="tokenTitle" style="margin:0; font-size:16px;">Thi·∫øt l·∫≠p GitHub Token</h3>
      <div style="flex:1"></div>
      <button id="tokClose" class="btn-secondary" type="button">ƒê√≥ng</button>
    </div>

    <div class="gh-wrap" style="display:block;">
      <div class="muted" style="margin-bottom:10px;">
        Tr·∫°ng th√°i: <b id="tokStatus">CH∆ØA THI·∫æT L·∫¨P</b> ‚Äî Token: <span id="tokPreview" class="code">(ch∆∞a c√≥)</span>
      </div>

      <label>Nh·∫≠p PAT (ghp_‚Ä¶ ho·∫∑c github_pat_‚Ä¶)</label>
      <input id="tokPlain" type="password" placeholder="D√°n PAT c·ªßa b·∫°n v√†o ƒë√¢y‚Ä¶"/>

      <div class="actions" style="margin-top:10px;">
        <button id="tokSaveLS" class="btn-primary">L∆∞u v√†o tr√¨nh duy·ªát</button>
        <button id="tokCopyB64FromPlain" class="btn-secondary">M√£ ho√° &amp; Copy Base64</button>
      </div>

      <label style="margin-top:12px;">Base64 ƒëang l∆∞u (localStorage.gh_token_b64)</label>
      <input id="tokB64" type="text" readonly />

      <div class="actions" style="margin-top:10px; justify-content:space-between;">
        <div style="display:flex; gap:8px;">
          <button id="tokCopyB64Current" class="btn-secondary">Copy Base64 hi·ªán c√≥</button>
          <button id="tokDelete" class="btn-danger">Xo√° token kh·ªèi tr√¨nh duy·ªát</button>
        </div>
        <button id="tokClose" class="btn-secondary">ƒê√≥ng</button>
      </div>      
    </div>
  </div>
</div>
</body>
</html>
